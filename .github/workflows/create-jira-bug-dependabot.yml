name: Create Jira Issues Workflow

on:
  pull_request:
    branches: [ "master" ]

jobs:
  create_jira_issue:
    runs-on: ubuntu-latest

    strategy:
      matrix:
        node-version: [ 20.x ]
        # See supported Node.js release schedule at https://nodejs.org/en/about/releases/

    steps:
         - name: Create Jira Issue
           if: github.actor == 'dependabot[bot]'
           uses: actions/issues-ops-jira@v1
           with:
            JIRA_API_TOKEN: ${{ secrets.JIRA_TOKEN }}
            JIRA_API_HOST: ${{ secrets.JIRA_BASE_URL }}
            JIRA_PROJECT: ${{ secrets.JIRA_PROJECT }}
            JIRA_USER_EMAIL: ${{ secrets.JIRA_USER_EMAIL }}
            JIRA_ISSUE_OPERATION: 'CREATE_ISSUE'
            JIRA_JSON_INPUT: '{"summary": "Security issue in the project dependencies PR no " + ${{ github.event.pull_request.number}}, "issue_type": "Bug", description": "Security issue in the project dependencies PR no " + ${{ github.event.pull_request.number }} }'